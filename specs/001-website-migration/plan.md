# Implementation Plan: Parsons Ham Radio Club Website Migration to GitHub Pages

**Branch**: `001-website-migration` | **Date**: 2025-10-30 | **Spec**: [spec.md](spec.md)
**Input**: Feature specification from `/specs/001-website-migration/spec.md`

## Summary

Migrate the Parsons Amateur Radio Club website from self-hosted PHP on Raspberry Pi to static hosting on GitHub Pages. The migration preserves all 19 HTML pages, 174 images, and existing functionality with pixel-perfect visual fidelity while replacing PHP-dependent features (contact form, search, RSS generation) with static or serverless alternatives. The project delivers zero-cost hosting ($0/year vs. electricity + maintenance time), 99.9% uptime (GitHub Pages SLA vs. home internet reliability), and a modernized Git-based maintenance workflow for the site owner.

**Technical Approach**: This is a **file migration and cleanup project**, not new software development. The existing HTML/CSS/JavaScript codebase (generated by WebSite X5 Evolution in 2019) is production-ready and requires minimal modification. The migration workflow focuses on:
1. Removing PHP dependencies (admin panel, PHP engine files, server-side form processing)
2. Replacing dynamic features with static/serverless alternatives (Formspree for contact form)
3. Updating configuration (RSS feed references, .gitignore)
4. Validation testing (visual regression, functional equivalence)
5. Documentation for site owner maintenance

## Technical Context

**Language/Version**: N/A (static HTML5/CSS3/JavaScript - no compilation or build process)
**Primary Dependencies**:
- Existing: jQuery 1.7 and modern, x5engine.js, Jssor Slider, Justified Gallery, Anime.js, ImagesLoaded, Moment.js
- New: Formspree (third-party contact form service, free tier)
- All dependencies are self-hosted JavaScript libraries (no package manager, no build step)

**Storage**: Static files in Git repository (HTML, CSS, JS, images); no database required
**Testing**: Manual visual regression testing (side-by-side comparison), functional testing (navigation, forms, embeds), browser compatibility testing (Chrome, Firefox, Safari, Edge)
**Target Platform**: GitHub Pages (static site hosting); browsers: modern Chrome/Firefox/Safari/Edge (same as original site)
**Project Type**: Static website migration (not single/web/mobile app development)
**Performance Goals**:
- Page load time ≤3 seconds for homepage on standard broadband (equal to or better than Raspberry Pi)
- All 19 pages functional on GitHub Pages URL within 2 minutes of deployment
- Zero downtime during migration (old site stays up until validation complete)

**Constraints**:
- **NO build tools**: Site must load directly from HTML files (no Webpack, Vite, etc.)
- **NO code changes to working files**: HTML/CSS/JS must be preserved except for specific replacements (form action URL, RSS references)
- **Free tier limits**: Formspree 50 submissions/month, GitHub Pages 1GB repo size
- **Visual fidelity**: Pixel-perfect match to original site (constitution principle I - NON-NEGOTIABLE)

**Scale/Scope**:
- 19 HTML pages (~5,000 total lines)
- 174 image files (~17MB)
- 4 user stories (2 P1, 1 P2, 1 P3)
- 35 functional requirements
- Estimated migration time: 6-8 hours of work

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

### Principle I: Preserve User Experience (NON-NEGOTIABLE)
✅ **PASS** - Migration approach preserves all HTML/CSS/JS files with minimal changes. Visual fidelity ensured by:
- Keeping all 19 HTML pages unchanged except contact form action URL and RSS references
- Preserving all CSS (global + page-specific) and JavaScript libraries
- Maintaining all image galleries, slideshows, navigation, responsive design
- Testing requirement: Visual regression testing for all 19 pages

### Principle II: Maintainability First
✅ **PASS** - No build tools or compilation required. Site owner (Bob) can edit HTML directly in VS Code:
- Direct HTML/CSS/JS editing workflow (no transpilation, bundling, or deployment scripts)
- Git commit through VS Code GUI (no command line requirement)
- GitHub Pages auto-deploys on push (no manual deployment steps)
- Documentation will be created in quickstart.md for common maintenance tasks

### Principle III: Static-First Architecture
✅ **PASS** - All PHP dependencies eliminated or replaced:
- Contact form: Formspree (client-side integration, free tier)
- Search: Removed (19 pages navigable without search; browser Find and clear menu sufficient)
- RSS feed: Static XML file (x5feed.xml already exists)
- Admin panel: Removed (not needed for static hosting)

### Principle IV: Zero Cost Operation
✅ **PASS** - All services are free tier:
- GitHub Pages: Free (included with public repository)
- Formspree: Free tier (50 submissions/month sufficient for small club)
- All JavaScript libraries: Self-hosted (no CDN costs)
- Total cost: $0/year (vs. Raspberry Pi electricity + time cost)

### Principle V: Minimize File Changes
✅ **PASS** - Changes limited to required minimum:
- Remove: /admin/ directory, PHP files in /res/, /imemail/, /captcha/, imsearch.php
- Modify: contact.html form action (1 line change), RSS references in 19 HTML files (1 line each)
- Add: .gitignore file
- Preserve: All 19 HTML pages, all CSS, all JS libraries, all images (174 files)

### Principle VI: Incremental Deployment
✅ **PASS** - Migration is phased and testable:
- Phase 1: Clean files, commit to feature branch, test locally
- Phase 2: Deploy to GitHub Pages, validate all features work
- Phase 3: Replace contact form, test email delivery
- Phase 4: Final validation, then switch from Raspberry Pi to GitHub Pages
- Old site stays operational throughout migration for zero downtime

### Principle VII: Documentation & Knowledge Transfer
✅ **PASS** - Documentation artifacts planned:
- quickstart.md: VS Code + Git workflow for Bob
- Migration decisions documented in this plan
- Common tasks guide: update text, add images, update officers, troubleshoot
- Training will occur after migration (P3 user story)

**Constitution Compliance**: ✅ **ALL GATES PASSED** - No violations. Migration approach fully aligned with constitution principles.

## Project Structure

### Documentation (this feature)

```text
specs/001-website-migration/
├── spec.md              # Feature specification (completed)
├── plan.md              # This file (implementation plan)
├── research.md          # Phase 0 output (migration strategy decisions)
├── data-model.md        # Phase 1 output (file inventory and dependencies)
├── quickstart.md        # Phase 1 output (maintenance guide for Bob)
├── contracts/           # Phase 1 output (Formspree integration spec)
│   └── formspree-integration.md
├── checklists/
│   └── requirements.md  # Spec quality checklist (completed)
└── tasks.md             # Phase 2 output (/speckit.tasks command - NOT created by /speckit.plan)
```

### Source Code (repository root)

This is a static website migration, not new code development. The repository structure is **existing** and will be **modified minimally**:

```text
/ (repository root)
├── *.html                  # 19 HTML pages (KEEP - minimal changes)
├── /style/                 # Global CSS (KEEP)
│   ├── reset.css
│   ├── style.css
│   ├── template.css
│   └── print.css
├── /pcss/                  # Page-specific CSS (KEEP)
│   ├── index.css
│   ├── contact.css
│   └── ... (19 total)
├── /images/                # Content images (KEEP)
├── /gallery/               # Header slideshow images (KEEP)
├── /pluginAppObj/          # Gallery and slider plugins (KEEP)
├── /appsresources/         # Third-party libraries (KEEP)
├── /res/                   # Engine and utilities (MODIFY - remove PHP files)
│   ├── jquery.js           # KEEP
│   ├── x5engine.js         # KEEP
│   ├── x5engine.php        # REMOVE (PHP engine)
│   ├── access.inc.php      # REMOVE (PHP auth)
│   ├── search.inc.php      # REMOVE (PHP search)
│   ├── imemail.inc.php     # REMOVE (PHP email)
│   └── class.phpmailer.php # REMOVE (PHP mailer)
├── /admin/                 # REMOVE ENTIRE DIRECTORY (856KB, 70+ files)
├── /imemail/               # REMOVE ENTIRE DIRECTORY (contact form processor)
├── /captcha/               # REMOVE ENTIRE DIRECTORY (PHP captcha)
├── imsearch.php            # REMOVE (PHP search page)
├── x5feed.php              # KEEP FOR REFERENCE, use x5feed.xml instead
├── x5feed.xml              # KEEP (static RSS feed)
├── .gitignore              # ADD (exclude .claude/, node_modules/, .DS_Store, etc.)
├── .specify/               # Spec-Kit directory (KEEP)
└── specs/                  # Feature specs (KEEP)
```

**Structure Decision**: This is a **static website migration**, not a software development project. The structure is dictated by the existing WebSite X5-generated codebase. No restructuring is permitted per Constitution Principle V (Minimize File Changes). The migration focuses on removing PHP dependencies while preserving the functional static site.

## Complexity Tracking

**No constitutional violations** - This section is empty because all constitution checks passed. No complexity justification required.

---

## Phase 0: Research & Migration Strategy

**Objective**: Research and document migration decisions for PHP replacement features and validation approach.

### Research Topics

1. **Formspree Integration for Contact Form**
   - Research: Formspree API documentation, integration pattern for static HTML forms
   - Decision: Which Formspree plan (free tier sufficient?), how to configure form action URL
   - Output: Formspree account setup instructions, form HTML modification pattern

2. **Visual Regression Testing Approach**
   - Research: Tools for comparing before/after screenshots (manual vs. automated)
   - Decision: Manual side-by-side comparison vs. Percy/BackstopJS (cost, complexity trade-offs)
   - Output: Testing checklist for all 19 pages, acceptance criteria

3. **RSS Feed Static Alternative**
   - Research: Verify x5feed.xml format, update frequency requirements
   - Decision: Keep static XML vs. explore client-side RSS generation
   - Output: RSS update workflow documentation

4. **Git Workflow for Non-Developer**
   - Research: VS Code Git GUI workflow, common pitfalls for non-developers
   - Decision: VS Code Source Control panel vs. command line, commit message guidelines
   - Output: Step-by-step guide for Bob (screenshots, common tasks)

5. **Local Testing Setup**
   - Research: VS Code Live Server extension vs. Python SimpleHTTPServer vs. other local server options
   - Decision: Simplest approach for Bob to test changes before pushing
   - Output: Local development setup instructions

### Research Deliverable: research.md

Document all decisions with:
- **Decision**: What was chosen (e.g., "Use Formspree free tier for contact form")
- **Rationale**: Why chosen (e.g., "Free tier supports 50 submissions/month, sufficient for small club; no credit card required")
- **Alternatives Considered**: What else was evaluated (e.g., "Netlify Forms, Google Forms - rejected due to signup complexity or different UX")
- **Implementation Notes**: How to execute (e.g., "Change form action to https://formspree.io/f/YOUR_FORM_ID, test with 5 submissions")

---

## Phase 1: Design & Migration Specifications

**Prerequisites**: research.md complete

### 1. File Inventory & Dependency Mapping (data-model.md)

Instead of traditional data models (entities, relationships), document:

**File Categories**:
- **HTML Pages** (19 files): List each page, size, dependencies (CSS, JS, images)
- **CSS Files** (47 total): Global styles, page-specific styles, plugin styles
- **JavaScript Libraries** (24 files): List each library, purpose, dependencies
- **Images** (174 files): Categorize by location (/images/, /gallery/, /pluginAppObj/), total size
- **PHP Files to Remove**: Complete list with justification for each removal

**Dependency Map**:
- Which HTML pages reference which CSS/JS files
- Which pages embed external content (YouTube, TuneIn, Google Calendar)
- Which pages have forms or interactive features requiring migration work

**File Change Manifest**:
- Files to DELETE (list with sizes, rationale)
- Files to MODIFY (list with specific changes: form action, RSS reference)
- Files to ADD (.gitignore, documentation)
- Files to KEEP unchanged (majority of codebase)

### 2. Formspree Integration Contract (contracts/formspree-integration.md)

Document the Formspree integration spec:

**Form Fields Mapping**:
- Original PHP field: `imObjectForm_3_2` → Formspree field: `email`
- Original PHP field: `imObjectForm_3_3` → Formspree field: `subject`
- Original PHP field: `imObjectForm_3_4` → Formspree field: `message`
- Original PHP field: `imObjectForm_3_5` → Formspree field: `attachment`

**Form Action Change**:
- Original: `action="imemail/imEmailForm.php"`
- New: `action="https://formspree.io/f/{FORM_ID}"`
- Method: `POST` (unchanged)

**Expected Behavior**:
- On submit: Form data sent to Formspree API
- Formspree sends email to: ae0aq@gmail.com
- Subject line: "Email from Parsons Ham Club Website"
- Redirect on success: index.html (Formspree configuration)
- Spam protection: Formspree honeypot + reCAPTCHA (automatic)

**Validation**:
- Test with 5 sample submissions
- Verify all fields (email, subject, message, attachment) arrive correctly
- Verify redirect works
- Verify spam protection active

### 3. Maintenance Quickstart Guide (quickstart.md)

Create comprehensive guide for Bob:

**Section 1: Setup (One-Time)**
- Install VS Code
- Install Git
- Clone repository
- Install Live Server extension

**Section 2: Common Tasks**
- Update text content (find HTML file, edit, save, commit, push)
- Add new image (copy to /images/, reference in HTML, commit, push)
- Update club officers (edit contact.html footer)
- Fix typo (use search, edit, commit, push)

**Section 3: Git Workflow (VS Code GUI)**
- Make changes in any file
- Source Control panel: see changed files
- Stage changes: click + button
- Commit: write message, click ✓
- Push: click "Sync Changes" button
- Wait 1-2 minutes for GitHub Pages rebuild
- Verify changes live

**Section 4: Troubleshooting**
- What if push fails? (pull changes first)
- What if site looks broken? (revert commit)
- What if image doesn't show? (check file path)
- What if form stops working? (check Formspree quota)

**Section 5: Getting Help**
- Ask free Gemini: "How do I [task] in HTML?"
- GitHub support for repository issues
- Formspree support for contact form issues

### 4. Update Agent Context

Run `.specify/scripts/bash/update-agent-context.sh claude` to add migration-specific context to Claude's knowledge base:

**Technologies to Add**:
- Formspree (contact form service)
- GitHub Pages (static hosting platform)
- WebSite X5 Evolution (original site generator - for context only)

**Context to Preserve**:
- Existing HTML/CSS/JS stack (jQuery, x5engine, Jssor, etc.)
- Git workflow (already configured)

---

## Phase 2: Validation & Rollout Plan

**Covered by `/speckit.tasks` command** - This plan document ends after Phase 1. The tasks command will generate:
- Detailed task breakdown (file deletions, modifications, testing steps)
- Dependency order (what must happen before what)
- Validation checklists (visual regression, functional testing)
- Rollout sequence (feature branch → staging validation → main branch merge)

---

## Next Steps

1. **Complete Phase 0**: Generate research.md with migration decisions
2. **Complete Phase 1**: Generate data-model.md, contracts/, quickstart.md
3. **Run `/speckit.tasks`**: Generate detailed task list for implementation
4. **Run `/speckit.implement`**: Execute migration tasks in sequence

**Branch**: `001-website-migration` (already created and checked out)
**Spec File**: `/Users/hoff/Documents/parsonshamclub/specs/001-website-migration/spec.md`
**Plan File**: `/Users/hoff/Documents/parsonshamclub/specs/001-website-migration/plan.md` (this file)

**Ready for**: Phase 0 research execution
